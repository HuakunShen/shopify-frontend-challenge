(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{16:function(e,t,n){},18:function(e,t,n){},20:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n(1),i=n.n(a),s=n(8),r=n.n(s),o=(n(16),n(10)),l=n(6),d=n.n(l),u=n(9),j=n(2),b=(n(18),n(19),n(7)),m=n.n(b),h="1583369f";window.Clipboard=function(e,t,n){var c;function a(){var a,i;n.userAgent.match(/ipad|iphone/i)?((a=t.createRange()).selectNodeContents(c),(i=e.getSelection()).removeAllRanges(),i.addRange(a),c.setSelectionRange(0,999999)):c.select()}return{copy:function(e){!function(e){(c=t.createElement("textArea")).value=e,t.body.appendChild(c)}(e),a(),t.execCommand("copy"),t.body.removeChild(c)}}}(window,document,navigator);var f=function(e){var t=e.movie;return Object(c.jsx)("div",{className:"movie-info",children:Object(c.jsxs)("div",{className:"row",children:[Object(c.jsx)("div",{className:"col-lg-4",children:Object(c.jsx)("img",{className:"movie-poster",src:"N/A"===t.Poster?"not_available.png":t.Poster,alt:""})}),Object(c.jsxs)("div",{className:"col-lg-8",children:[Object(c.jsxs)("p",{children:[Object(c.jsx)("strong",{children:"Title:"})," ","".concat(t.Title)]}),Object(c.jsxs)("p",{children:[Object(c.jsx)("strong",{children:"Year:"})," ","".concat(t.Year)]}),Object(c.jsxs)("p",{children:[Object(c.jsx)("strong",{children:"imdb ID:"})," ","".concat(t.imdbID)]})]})]})})};var p=function(){var e=Object(a.useState)(""),t=Object(j.a)(e,2),n=t[0],i=t[1],s=Object(a.useState)([]),r=Object(j.a)(s,2),l=r[0],b=r[1],p=Object(a.useState)(""),O=Object(j.a)(p,2),v=O[0],x=O[1],g=Object(a.useState)(!1),N=Object(j.a)(g,2),w=N[0],y=N[1],S=Object(a.useState)([]),k=Object(j.a)(S,2),C=k[0],I=k[1],E=Object(a.useState)(!1),T=Object(j.a)(E,2),D=T[0],R=T[1],P=Object(a.useState)(null),F=Object(j.a)(P,2),L=F[0],A=F[1],Y=function(e,t,n){var c=n||3e3;x(e),y(t),L&&clearTimeout(L),A(setTimeout((function(){x("")}),c))},_=function(e){return new Promise((function(t,n){fetch("https://www.omdbapi.com/?i=".concat(e,"&apikey=").concat(h)).then((function(e){return e.json()})).then((function(e){"True"===e.Response?t(e):n(e.Error)}),(function(e){n(e)}))}))},B=function(e){var t=[];e.forEach(function(){var e=Object(u.a)(d.a.mark((function e(n,c){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c>=5?Y("Error: Your share line contains more than ".concat(5," movies, only 5 will be loaded"),!0,5e3):t.push(_(n));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),Promise.all(t).then((function(e){I(e)})).catch((function(e){Y("Error: Got error while loading shared movies. ".concat(e))}))};Object(a.useEffect)((function(){if("/share"===window.location.pathname){var e=new URLSearchParams(window.location.search);0===e.get("ids").length&&Y("Error: Share Link has no content",!0,5e3);var t=e.get("ids").split(",");B(t)}else if(localStorage.getItem("movie_ids")){var n=localStorage.getItem("movie_ids").split(",");B(n)}}),[]),Object(a.useEffect)((function(){D?(localStorage.setItem("movie_ids",C.map((function(e){return e.imdbID})).join(",")),5===C.size&&Y("".concat(5," movies are nominated, you reached the limit"),!1)):R(!0)}),[C,D]),Object(a.useEffect)((function(){""===n?b([]):new Promise((function(e,t){fetch("https://www.omdbapi.com/?s=".concat(n,"&apikey=").concat(h)).then((function(e){return e.json()})).then((function(n){"True"===n.Response?e(n.Search):t(n.Error)}),(function(e){t(e)}))})).then((function(e){b(e)})).catch((function(e){Y(e,!0),b([])}))}),[n]);var J=function(e,t){var n;n=e.target.parentElement,m()(n).addClass("removing"),m()(n).children("*").addClass("removing"),setTimeout((function(){I(C.filter((function(e){return e.imdbID!==t.imdbID})))}),850)},M=function(e){for(var t=0;t<C.length;t++)if(C[t].imdbID===e.imdbID)return!0;return!1};return Object(c.jsx)("div",{className:"App",children:Object(c.jsxs)("div",{className:"container pt-5",children:[Object(c.jsx)("h2",{id:"title",children:"The Shoppies"}),Object(c.jsx)("i",{className:"far fa-share-square",onClick:function(e){var t=C.map((function(e){return e.imdbID}));if(0!==t.length){var n=new URLSearchParams;n.set("ids",t);var c="".concat(window.location.origin,"/share?").concat(n.toString());window.Clipboard.copy(c),Y("Your share link is generated and saved to your clipboard: ".concat(c),!1,1e4)}else Y("Nothing to Share",!0)}}),Object(c.jsx)("a",{id:"source-code-link",target:"_blank",rel:"noreferrer",href:"https://github.com/HuakunShen/shopify-frontend-challenge",children:Object(c.jsx)("i",{className:"fas fa-code"})}),Object(c.jsx)("div",{className:"card",children:Object(c.jsxs)("div",{className:"card-body",children:[Object(c.jsx)("label",{htmlFor:"search-box",children:"Movie Title"}),Object(c.jsxs)("div",{className:"input-group",children:[Object(c.jsx)("div",{className:"input-group-prepend",children:Object(c.jsx)("button",{className:"btn btn-outline-secondary",children:Object(c.jsx)("i",{className:"fas fa-search"})})}),Object(c.jsx)("input",{id:"search-box",type:"text",value:n,className:"form-control",placeholder:"Search",onChange:function(e){return i(e.target.value)}})]})]})}),v?Object(c.jsx)("div",{className:"alert alert-".concat(w?"danger":"primary"," mt-3 sticky-top"),role:"alert",children:v}):null,Object(c.jsxs)("div",{className:"row mt-3",children:[Object(c.jsx)("div",{className:"col-md-6",children:Object(c.jsx)("div",{className:"card",children:Object(c.jsxs)("div",{id:"movie-list",className:"card-body",children:[Object(c.jsxs)("h3",{children:["Results For ",n?'"'.concat(n,'"'):"..."]}),Object(c.jsxs)("ul",{className:"list-group",children:[l.map((function(e,t){return Object(c.jsxs)("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[Object(c.jsx)(f,{movie:e}),Object(c.jsx)("button",{className:"btn btn-primary btn-sm",disabled:M(e),onClick:function(){return function(e,t){console.log("click nominate"),M(t)?Y("Error: Invalid Click on Nominate Button (Shouldnn't be able to click)",!0):C.length>=5?Y("You reach the max nomination limit: ".concat(5),!0):I([].concat(Object(o.a)(C),[t]))}(0,e)},children:"Nominate"})]},t)})),0!==l.length?null:Object(c.jsx)("div",{className:"d-flex justify-content-center pt-4",children:Object(c.jsx)("div",{className:"spinner-border",role:"status",children:Object(c.jsx)("span",{className:"sr-only",children:"Loading..."})})})]})]})})}),Object(c.jsx)("div",{className:"col-md-6",children:Object(c.jsx)("div",{className:"card",children:Object(c.jsxs)("div",{className:"card-body",children:[Object(c.jsx)("h3",{children:"Nominations"}),Object(c.jsx)("ul",{className:"list-group",children:C.map((function(e){return Object(c.jsxs)("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[Object(c.jsx)(f,{movie:e}),Object(c.jsx)("button",{className:"btn btn-danger btn-sm",disabled:!1,onClick:function(t){return J(t,e)},children:"Remove"})]},e.imdbID)}))})]})})})]})]})})},O=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,21)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),i(e),s(e)}))};r.a.render(Object(c.jsx)(i.a.StrictMode,{children:Object(c.jsx)(p,{})}),document.getElementById("root")),O()}},[[20,1,2]]]);
//# sourceMappingURL=main.36e25a5b.chunk.js.map